<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
</head>
<body>
        <center><h1>Snake game</h1></center>
        <center>
            <table>
                <tr>
                    <td id="cell_1"></td> <td id="cell_2"></td> <td id="cell_3"></td> <td id="cell_4"></td><td id="cell_5"></td>
                     <td id="cell_6"></td> <td id="cell_7"></td> <td id="cell_8"></td><td id="cell_9"></td> <td id="cell_10"></td>
                </tr>
                <tr>
                    <td id="cell_11"></td> <td id="cell_12"></td> <td id="cell_13"></td> <td id="cell_14"></td> <td id="cell_15"></td>
                    <td id="cell_16"></td> <td id="cell_17"></td> <td id="cell_18"></td> <td id="cell_19"></td> <td id="cell_20"></td>
                </tr>
                <tr>
                    <td id="cell_21"></td> <td id="cell_22"></td> <td id="cell_23"></td> <td id="cell_24"></td> <td id="cell_25"></td>
                    <td id="cell_26"></td> <td id="cell_27"></td> <td id="cell_28"></td> <td id="cell_29"></td> <td id="cell_30"></td>
                </tr>
                <tr>
                    <td id="cell_31"></td> <td id="cell_32"></td> <td id="cell_33"></td> <td id="cell_34"></td> <td id="cell_35"></td>
                    <td id="cell_36"></td> <td id="cell_37"></td> <td id="cell_38"></td> <td id="cell_39"></td> <td id="cell_40"></td>
                </tr>
                <tr>
                    <td id="cell_41"></td> <td id="cell_42"></td> <td id="cell_43"></td> <td id="cell_44"></td> <td id="cell_45"></td>
                    <td id="cell_46"></td> <td id="cell_47"></td> <td id="cell_48"></td> <td id="cell_49"></td> <td id="cell_50"></td>
                </tr>
                <tr>
                    <td id="cell_51"></td> <td id="cell_52"></td> <td id="cell_53"></td> <td id="cell_54"></td> <td id="cell_55"></td>
                    <td id="cell_56"></td> <td id="cell_57"></td> <td id="cell_58"></td> <td id="cell_59"></td> <td id="cell_60"></td>
                </tr>
                <tr>
                    <td id="cell_61"></td> <td id="cell_62"></td> <td id="cell_63"></td> <td id="cell_64"></td> <td id="cell_65"></td>
                    <td id="cell_66"></td> <td id="cell_67"></td> <td id="cell_68"></td> <td id="cell_69"></td> <td id="cell_70"></td>
                </tr>
                <tr>
                    <td id="cell_71"></td> <td id="cell_72"></td> <td id="cell_73"></td> <td id="cell_74"></td> <td id="cell_75"></td>
                    <td id="cell_76"></td> <td id="cell_77"></td> <td id="cell_78"></td> <td id="cell_79"></td> <td id="cell_80"></td>
                </tr>
                <tr>
                    <td id="cell_81"></td> <td id="cell_82"></td> <td id="cell_83"></td> <td id="cell_84"></td> <td id="cell_85"></td>
                    <td id="cell_86"></td> <td id="cell_87"></td> <td id="cell_88"></td> <td id="cell_89"></td> <td id="cell_90"></td>
                </tr>
                <tr>
                    <td id="cell_91"></td> <td id="cell_92"></td> <td id="cell_93"></td> <td id="cell_94"></td> <td id="cell_95"></td>
                    <td id="cell_96"></td> <td id="cell_97"></td> <td id="cell_98"></td> <td id="cell_99"></td> <td id="cell_100"></td>
                </tr>
            </table>
            <h2>Score:<span>0</span></h2>
            <h2 id="highscore">HighestScore:<span id="displayHighScore"></span></h2>
        
        </center>
        <div id="dialogbox">
            <div id="dialogbox_content">
                <h3>Game Over !</h3>
                <button onclick="startgame()">play again</button>
            </div>
        </div>

        <style>
            table{
                position:fixed;
                top:  11%;
                left: 32.5%;
                width: 35%;
                height: 75%;
                border:5px solid black;
                background-color: black;
                border-radius: 10px;
            }
            
            h1{
                position:static;
                top: 0%;
                color: #684551;
            }

            body{
                background-color: #D5B0AC;
            }
            
            h2{
                position:fixed;
                top:  85%;
                left:33%;
            }

            #highscore{
                position:fixed;
                top:  85%;
                left:55%;
            }
        
            #dialogbox{
                display: none;
                position:fixed;
                top:  0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(231, 7, 179, 0.5);
                z-index: 1; 
                
            }
        
            #dialogbox_content{
                background-color: #fff;
                padding: 15px;
                padding-top:20px;
                margin-left: 38%;
                margin-top:15%;
                width: 20%;
                height: 18%;
                text-align: center;
                border-radius: 10px;
                border: 4px solid #2F1847;
            }
        
            button{
                background-color: #472d27;
                color: #fff;
                padding: 10px;
                border-radius: 8px;
            }
        
            button:hover{
                background-color:#fff;
                color: #402e2a;
                font-weight: bold;
        
            }
        
        </style>
        
        
        <script>
                let arr=[]
                let row =[]
                let score=0,highscore=0;
                let arrcells=[[0,0],[0,1]];

                let currow=0,curcol=0,prevdirection='ArrowRight',direction='ArrowRight';
                if (localStorage.getItem("highScore") === null) {
                    localStorage.setItem("highScore", "0");
                }
                highscore=parseInt(localStorage.getItem("highScore"),10);
                document.getElementById("displayHighScore").innerHTML=highscore;

                for(let i=1;i<=100;i++){
                    if(i % 10 == 0){
                    let cell=document.getElementById(`cell_${i}`);
                    row.push(cell);
                    arr.push(row);
                    row=[];
                    }
                    else{
                        let cell=document.getElementById(`cell_${i}`);
                        row.push(cell);
                    }
                }
                arr[2][4].style.backgroundColor="cyan";
                arr[2][4].style.borderRadius="70px";
                
                let i=0;
                
                document.addEventListener('keyup' , 
                function(e){
                    prevdirection=direction;
                    direction = e.key;
                }
                )
        

                function startgame(){
                currow=0,curcol=0,prevdirection='ArrowRight',direction='ArrowRight';
                for(let i=0;i<arrcells.length;i++){
                            arr[arrcells[i][0]][arrcells[i][1]].style.backgroundColor="black";
                        }
                arrcells=[[0,0],[0,1]];
                console.log(score ," ",highscore);
            
                if (score > highscore) {
                        highscore = score;
                        localStorage.setItem("highScore", highscore.toString());
                    }
                    score=0;
                    document.getElementById("displayHighScore").innerHTML = highscore;
                    document.querySelector("span").innerHTML=score;
                    document.getElementById("dialogbox").style.display="none";
                    movesnake = setInterval(moveAhead,340);
            }



        
                function moveAhead(){
        
                    let tailrow = arrcells[arrcells.length-1][0];
                    let tailcol = arrcells[arrcells.length-1][1];
                    if( prevdirection=="ArrowRight" && direction =="ArrowLeft")direction=prevdirection;
                    else if( prevdirection=="ArrowLeft" && direction =="ArrowRight")direction=prevdirection;
                    else if( prevdirection=="ArrowUp" && direction =="ArrowDown")direction=prevdirection;
                    else if( prevdirection=="ArrowDown" && direction =="ArrowUp"  )direction=prevdirection;
                                      
                    
                    if(direction !== ''){
                            if(direction==="ArrowUp"){
                                currow--;
                            }
                            else if(direction==="ArrowDown"){
                                currow++;
                            }
                            else if(direction==="ArrowRight"){
                                curcol++;
                            }
                            else if(direction==="ArrowLeft"){
                                curcol--;
                            }
        
                    }

                    let newrow=currow,newcol=curcol,temprow,tempcol;
                    

                    if((currow >9 || curcol>9)||(currow <0 || curcol<0)){
                        clearInterval(movesnake);
                        document.getElementById("dialogbox").style.display="block";
                        return;
                    }
                    

                    if((arr[currow][curcol].style.backgroundColor==="white")){
                        clearInterval(movesnake);
                        document.getElementById("dialogbox").style.display="block";
                        return;
                    }            
        
                    if(arr[currow][curcol].style.backgroundColor==="cyan"){
                        arr[currow][curcol].style.borderRadius="5px";
                        arr[currow][curcol].style.backgroundColor="white"; 
                        for(let i=0;i<arrcells.length;i++){
                            temprow = arrcells[i][0];
                            tempcol = arrcells[i][1];
                            arrcells[i][0]=newrow;
                            arrcells[i][1]=newcol;
                            newrow=temprow;
                            newcol=tempcol;
                        }
                        let row_col =[newrow,newcol]; 
                        arrcells.push(row_col);
                        score++;
                        document.querySelector("span").innerHTML=score;
        
                        while(true){
                            let row = Math.floor(Math.random()*10),col=Math.floor(Math.random()*10);
                            if(arr[row][col].style.backgroundColor != "white"){
                                arr[row][col].style.backgroundColor ="cyan";
                                arr[row][col].style.borderRadius="70px";
                                break;
                            }
        
                        }
        
        
        
                   }
        
        
        
                    else {
                        arr[tailrow][tailcol].style.backgroundColor="black";
                        for(let i=0;i<arrcells.length;i++){
                            temprow = arrcells[i][0];
                            tempcol = arrcells[i][1];
                            arrcells[i][0]=newrow;
                            arrcells[i][1]=newcol;
                            newrow=temprow;
                            newcol=tempcol;
                        }
                        
                        for(let i=0;i<arrcells.length;i++){
                                arr[arrcells[i][0]][arrcells[i][1]].style.backgroundColor="white";
                                arr[arrcells[i][0]][arrcells[i][1]].style.borderRadius="5px";
                                
                        }
                    }
        
                }
                //  let movesnake = setInterval(moveAhead,340);
        </script>
        


    </body>



</html>